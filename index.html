<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>aHub</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="style.css">
    <script src="app.js" defer></script>
</head>
<body>

    <div id="auth-overlay" class="overlay">
        <div class="auth-card">
            <h1>Welcome.</h1>
            <p style="margin-bottom: 20px; font-size: 0.9rem; color: #666;">Sign in to your workspace</p>
            <input type="email" id="user" placeholder="Email" class="neal-input">
            <input type="password" id="pass" placeholder="Password" class="neal-input">
            <div class="auth-buttons">
                <button onclick="app.login()" class="neal-btn primary">Login</button>
                <button onclick="app.register()" class="neal-btn">Sign Up</button>
            </div>
            <button onclick="app.forgotPassword()" style="margin-top:20px; background:none; border:none; text-decoration:underline; cursor:pointer; font-size:0.8rem;">Forgot Password?</button>
        </div>
    </div>

    <div id="main-content" class="hidden">
        <header class="main-header">
            <div class="logo" style="font-weight: 900; font-size: 1.5rem;">aHub</div>
            <button onclick="app.logout()" class="neal-btn">Logout</button>
        </header>

        <section class="workspace-bar" style="padding: 20px; background: #fff; border-bottom: 1px solid #000; display: flex; gap: 15px; align-items: center; flex-wrap: wrap;">
            <div style="display:flex; gap:5px;">
                <input type="text" id="join-work-id" placeholder="Space ID" class="neal-input" style="width: 140px; margin-bottom:0;">
                <button onclick="app.joinWorkspace(document.getElementById('join-work-id').value)" class="neal-btn">Join</button>
            </div>
            
            <div style="display:flex; gap:10px; align-items:center;">
                <select id="workspace-dropdown" class="neal-input" style="width: 200px; margin-bottom:0;" onchange="app.switchWorkspace(this.value)">
                    <option value="">ğŸ  Private Space</option>
                </select>
                <button onclick="app.createNewWorkspace()" class="neal-btn primary">+ New Space</button>
            </div>

            <button onclick="app.copyInviteLink()" class="neal-btn">ğŸ”— Invite</button>
        </section>

        <main id="module-container" class="grid-container"></main>

        <button class="fab" onclick="app.openModal()">+</button>
    </div>

    <div id="modal-overlay" class="overlay hidden">
        <div class="auth-card">
            <h2>New Module</h2>
            <input type="text" id="track-name" placeholder="Name" class="neal-input">
            <select id="track-type" class="neal-input">
                <option value="bool">ğŸ“… Calendar: Checkmark</option>
                <option value="text">ğŸ“… Calendar: Text Value</option>
                <option value="pure-text">ğŸ“ Sticky Note</option>
                <option value="drawing">ğŸ¨ Drawing Board</option>
            </select>
            <div class="auth-buttons">
                <button onclick="app.createTracker()" class="neal-btn primary">Create</button>
                <button onclick="app.closeModal()" class="neal-btn">Cancel</button>
            </div>
        </div>
    </div>

</body>
</html>