<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>aHub</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="style.css">
    <script src="app.js" defer></script>
</head>
<body>

    <div id="auth-overlay" class="overlay">
        <div class="auth-card">
            <h1>Welcome.</h1>
            <input type="email" id="user" placeholder="Email" class="neal-input">
            <input type="password" id="pass" placeholder="Password" class="neal-input" style="margin-top:10px;">
            <div style="margin-top:20px; display:flex; gap:10px; justify-content:center;">
                <button onclick="app.login()" class="neal-btn primary">Login</button>
                <button onclick="app.register()" class="neal-btn">Sign Up</button>
            </div>
        </div>
    </div>

    <div id="main-content" class="hidden">
        <header class="main-header">
            <div style="font-weight:900; font-size:1.5rem; letter-spacing:-1px;">aHub.</div>
            <button onclick="app.logout()" class="neal-btn">Log Out</button>
        </header>

        <section class="workspace-bar">
            <div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap;">
                <select id="workspace-dropdown" class="neal-input" style="width: 200px;" onchange="app.switchWorkspace(this.value)">
                    <option value="">ğŸ  Private Space</option>
                </select>
                
                <input type="text" id="join-id-input" placeholder="Enter Space ID..." class="neal-input" style="width: 140px;">
                <button onclick="app.joinWorkspaceManually()" class="neal-btn">Join</button>

                <button onclick="app.createNewWorkspace()" class="neal-btn primary">+ New</button>
                
                <div id="ws-manage-controls" style="display:none; align-items:center; gap:10px;">
                    <button class="neal-btn" onclick="app.renameWorkspace()">Rename</button>
                    <button class="neal-btn" onclick="app.deleteWorkspace()">Delete</button>
                    <button class="neal-btn" onclick="app.copyInviteLink()">ğŸ”— Invite</button>
                </div>
            </div>
        </section>

        <main id="module-container" class="flex-container"></main>

        <button class="fab" onclick="app.openModal()">+</button>
    </div>

    <div id="modal-overlay" class="overlay hidden">
        <div class="auth-card">
            <h2>New Module</h2>
            <input type="text" id="track-name" placeholder="Name" class="neal-input" style="width:100%; margin-bottom:10px;">
            <select id="track-type" class="neal-input" style="width:100%; margin-bottom:20px;">
                <option value="bool">ğŸ“… Calendar: Checkmark</option>
                <option value="text">ğŸ“… Calendar: Text Value</option>
                <option value="pure-text">ğŸ“ Sticky Note</option>
                <option value="drawing">ğŸ¨ Drawing Board</option>
                <option value="code">ğŸ‘©â€ğŸ’» Custom Code (HTML/CSS)</option>
            </select>
            <div style="display:flex; gap:10px; justify-content:center;">
                <button onclick="app.createTracker()" class="neal-btn primary">Create</button>
                <button onclick="app.closeModal()" class="neal-btn">Cancel</button>
            </div>
        </div>
    </div>
</body>
</html>